<h1 align= "center">CloudSource Myanmar Staffs List</h1>

<%= form_tag user_index_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>
<table style="width:100%">
  <thead>
    <tr>
      <th style="width:7%">ID</th>
      <th style="width:15%">Name</th>
      <th style="width:20%">Email</th>
      <th style="width:10%">Position</th>
      <th style="width:10%">Role</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.staff_id %></td>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
        <td><%= user.position %></td>
        <td><%= user.role %></td>
        <td><%= button_to('Edit', edit_user_path(user), :class => 'btn btn-default navbar-btn', :method => :get) if current_user.admin? %></td>
        <td style="width:34%"><%= button_to('Delete', user, :class => 'btn btn-default navbar-btn', :method => :delete, data: { confirm: 'Are you sure?' }) if current_user.admin? %></td>

        <% if current_user.position == "Android" && current_user.role == "leader" %>

          <td><%= button_to('Edit', edit_user_path(user), :class => 'btn btn-default navbar-btn', :method => :get ) if user.position == "Android" && user.role == "member" %></td>
          <td style="width:34%"><%= button_to('Delete', user, :class => 'btn btn-default navbar-btn', :method => :delete, data: { confirm: 'Are you sure?' }) if user.position == "Android" && user.role == "member" %></td>
        <% end %>

        <% if current_user.position == "Design" && current_user.role == "leader" %>

          <td><%= button_to('Edit', edit_user_path(user), :class => 'btn btn-default navbar-btn', :method => :get ) if user.position == "Design" && user.role == "member" %></td>
          <td style="width:34%"><%= button_to('Delete', user, :class => 'btn btn-default navbar-btn', :method => :delete, data: { confirm: 'Are you sure?' }) if user.position == "Design" && user.role == "member" %></td>
        <% end %>

        <% if current_user.position == "iOS" && current_user.role == "leader" %>

          <td><%= button_to('Edit', edit_user_path(user), :class => 'btn btn-default navbar-btn', :method => :get ) if user.position == "iOS" && user.role == "member" %></td>
          <td style="width:34%"><%= button_to('Delete', user, :class => 'btn btn-default navbar-btn', :method => :delete, data: { confirm: 'Are you sure?' }) if user.position == "iOS" && user.role == "member" %></td>
        <% end %>

        <% if current_user.position == "Rails" && current_user.role == "leader" %>

          <td><%= button_to('Edit', edit_user_path(user), :class => 'btn btn-default navbar-btn', :method => :get ) if user.position == "Rails" && user.role == "member" %></td>
          <td style="width:34%"><%= button_to('Delete', user, :class => 'btn btn-default navbar-btn', :method => :delete, data: { confirm: 'Are you sure?' }) if user.position == "Rails" && user.role == "member" %></button></td>
        <% end %>

      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= will_paginate @users %>

<%#= link_to 'New User', new_user_path %>
